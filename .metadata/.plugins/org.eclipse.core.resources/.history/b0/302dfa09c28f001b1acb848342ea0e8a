#include "BMP388.h"

#include "stm32l4xx_hal.h"

I2C_HandleTypeDef hi2c1;

int16_t NVM_PAR_T1 = 0;//27748;
int16_t NVM_PAR_T2 = 0;//18555;
int16_t NVM_PAR_T3 = 0;//246;
int16_t NVM_PAR_P1 = 0;
uint16_t NVM_PAR_P2 = 0;
int16_t NVM_PAR_P3 = 0;
int16_t NVM_PAR_P4 = 0;
int16_t NVM_PAR_P5 = 0;
int16_t NVM_PAR_P6 = 0;
int16_t NVM_PAR_P7 = 0;
int16_t NVM_PAR_P8 = 0;
int16_t NVM_PAR_P9 = 0;
int16_t NVM_PAR_P10 = 0;
int16_t NVM_PAR_P11 = 0;

uint8_t T1_reg1 = 0;
uint8_t T1_reg2 = 0;
uint8_t T2_reg1 = 0;
uint8_t T2_reg2 = 0;
uint8_t T3_reg1 = 0;
uint8_t P1_reg1 = 0;
uint8_t P1_reg2 = 0;
uint8_t P2_reg1 = 0;
uint8_t P2_reg2 = 0;
uint8_t P3_reg1 = 0;
uint8_t P4_reg1 = 0;
uint8_t P5_reg1 = 0;
uint8_t P5_reg2 = 0;
uint8_t P6_reg1 = 0;
uint8_t P6_reg2 = 0;
uint8_t P7_reg1 = 0;
uint8_t P8_reg1 = 0;
uint8_t P9_reg1 = 0;
uint8_t P9_reg2 = 0;
uint8_t P10_reg1 = 0;
uint8_t P11_reg1 = 0;

	float par_t1 = 0;
	  float par_t2 = 0;
	  float par_t3 = 0;

	  uint8_t temp0 = 0;
	  uint8_t temp1 = 0;
	  uint8_t temp2 = 0;

	  uint8_t press0 = 0;
	  uint8_t press1 = 0;
	  uint8_t press2 = 0;
	  uint32_t temperature = 0;
	  uint32_t pressure = 0;
	  float wynik = 0;
	  float partial_data1 = 0;
	  float partial_data2 = 0;
	  float partial_data3 = 0;
	  float partial_data4 = 0;
	  float comp_press = 0;
	  float partial_out1 = 0;
	  float partial_out2 = 0;
	 float temp = 0;
	 float pres = 0;


	 HAL_I2C_Mem_Read(&hi2c1, BMP388_ADDRESS, 0x31, 1, &T1_reg1, 1, 100);
	   HAL_I2C_Mem_Read(&hi2c1, BMP388_ADDRESS, 0x32, 1, &T1_reg2, 1, 100);
	   HAL_I2C_Mem_Read(&hi2c1, BMP388_ADDRESS, 0x33, 1, &T2_reg1, 1, 100);
	   HAL_I2C_Mem_Read(&hi2c1, BMP388_ADDRESS, 0x34, 1, &T2_reg2, 1, 100);
	   HAL_I2C_Mem_Read(&hi2c1, BMP388_ADDRESS, 0x35, 1, &T3_reg1, 1, 100);
